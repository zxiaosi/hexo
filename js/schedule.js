!function(){const m={orderBy:"startTime",showLocation:!1,offsetMax:72,offsetMin:4,showDeleted:!1,singleEvents:!0,maxResults:250};Object.assign(m,CONFIG.calendar);const v=new Date,e=new Date,t=new Date;e.setHours(v.getHours()+m.offsetMax),t.setHours(v.getHours()-m.offsetMin);var n={key:m.api_key,orderBy:m.orderBy,timeMax:e.toISOString(),timeMin:t.toISOString(),showDeleted:m.showDeleted,singleEvents:m.singleEvents,maxResults:m.maxResults};const s=new URL(`https://www.googleapis.com/calendar/v3/calendars/${m.calendar_id}/events`);function i(e,t,n,s){var a,o,r,i,c,l,d={weekday:"short",hour:"2-digit",minute:"2-digit"},o="now"===e?"NOW":(a=v,c=30*(i=24*(r=36e5)),l=365*i,o=0<(a=a-(o=n))?" ago":" later",(a=Math.abs(a))<r?Math.round(a/6e4)+" minutes"+o:a<i?Math.round(a/r)+" hours"+o:a<c?"about "+Math.round(a/i)+" days"+o:a<l?"about "+Math.round(a/c)+" months"+o:"about "+Math.round(a/l)+" years"+o),d=n.toLocaleTimeString([],d)+" - "+s.toLocaleTimeString([],d);let u="";m.showLocation&&t.location&&(u=`<span class="event-location event-details">${t.location}</span>`);let h="";return t.description&&(h=`<span class="event-description event-details">${t.description}</span>`),`<section class="event event-${e}">
        <h2 class="event-summary">
          ${t.summary}
          <span class="event-relative-time">${o}</span>
        </h2>
        ${u}
        <span class="event-duration event-details">${d}</span>
        ${h}
      </section>`}function a(){const r=document.querySelector(".event-list");r&&fetch(s.href).then(e=>e.json()).then(e=>{if(0!==e.items.length){r.innerHTML="";let a=0;const o=6e4*(new Date).getTimezoneOffset();e.items.forEach(e=>{var t=new Date(e.start.dateTime||new Date(e.start.date).getTime()+o),n=new Date(e.end.dateTime||new Date(e.end.date).getTime()+o);let s="now";n<v?s="past":t>v&&(s="future"),"future"===s&&a<v&&(r.innerHTML+="<hr>"),r.innerHTML+=i(s,e,t,n),a=n})}else r.innerHTML="<hr>"})}Object.entries(n).forEach(e=>s.searchParams.append(...e)),a();const o=setInterval(a,6e4);document.addEventListener("pjax:send",()=>{clearInterval(o)})}();